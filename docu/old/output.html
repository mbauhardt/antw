<hr />

<h2 id="title:antwversion0.5">title:  antw version 0.5</h2>

<p><link href="http://kevinburke.bitbucket.org/markdowncss/markdown.css" rel="stylesheet"></link></p>

<p><a href="https://github.com/mbauhardt/antw"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a></p>

<hr />

<h1 id="antw">Antw</h1>

<p>a wrapper for apache ant</p>

<hr />

<p>Table Of Content</p>

<ol>
<li><a href="#about" title="About">About</a></li>
<li><a href="#installation" title="Installation">Installation</a></li>
<li><a href="#desinstallation" title="Desinstallation">Desinstallation</a></li>
<li><a href="#usage" title="Usage">Usage</a></li>
<li><a href="#loggerandformatter" title="Logger and Formatter">Logger And Formatter</a>
<ul>
<li><a href="#treelogger" title="TreeLogger">TreeLogger</a></li>
<li><a href="#durationlogger" title="DurationLogger">DurationLogger</a></li>
<li><a href="#targetsummarylogger" title="TargetSummaryLogger">TargetSummaryLogger</a></li>
<li><a href="#junitlogger" title="JunitLogger">JunitLogger</a></li>
<li><a href="#messagelogger" title="MessageLogger">MessageLogger</a></li>
<li><a href="#antdefaultlogger" title="AntDefaultLogger">AntDefaultLogger</a></li>
</ul></li>
</ol>

<hr />

<h3 id="about">About</h3>

<p>Antw is a wrapper for apache ant. Antw attach at runtime a bunch of loggers to log some helpful statistics about your build. All statistics are logged to a directory called <em>antw</em> located in your build directory (usually <em>build/antw</em>).</p>

<h3 id="whatantwwilldoforyou">What antw will do for you</h3>

<p>Antw will download and install apache ant version 1.8.3 for you under directory</p>

<pre><code>~/.antw/install/contrib
</code></pre>

<p>It provides a script that use a set of loggers. All loggers log interesting statistics about your build. Not more.</p>

<hr />

<h3 id="installation">Installation</h3>

<p>You can install <em>antw</em> via <em>curl</em> or <em>wget</em>  </p>

<p>via curl</p>

<pre><code>curl -L https://raw.github.com/mbauhardt/antw/latest/src/main/scripts/antw-checkout.sh | sh
</code></pre>

<p>or via wget</p>

<pre><code>wget --no-check-certificate https://raw.github.com/mbauhardt/antw/latest/src/main/scripts/antw-checkout.sh -O - | sh
</code></pre>

<p>This will install the <em>antw</em> sources under directory</p>

<pre><code>~/.antw/source
</code></pre>

<p>And the binary under directory</p>

<pre><code>~/.antw/install
</code></pre>

<p>After installation add the bin folder to your PATH</p>

<pre><code>export PATH=$PATH:~/.antw/install/bin
</code></pre>

<h3 id="desinstallation">Desinstallation</h3>

<p>Remove the directory <em>.antw</em></p>

<pre><code>rm -rf ~/.antw
</code></pre>

<hr />

<h3 id="usage">Usage</h3>

<p>The recommended way to use <em>antw</em> is to download/install the whole antw project, see above. 
There are two commands to use <em>antw</em>.</p>

<pre><code>antw - executes apache ant with some special loggers
antw-update - update your antw installation
</code></pre>

<h5 id="optional">Optional</h5>

<p>It is also recommended but optional to enable the antw junit formatter in your ant project when you use  <em>antw</em>. Goto the download page</p>

<pre><code>https://github.com/mbauhardt/antw/downloads
</code></pre>

<p>and download the <em>antw-common.jar</em> and the <em>antw-junit.jar</em> and add these jar files to your classpath. After that enable the formatter</p>

<pre><code>&lt;formatter classname="antw.junit.JUnitFormatter" usefile="false"/&gt;
</code></pre>

<h5 id="note">Note</h5>

<p>When you want to try the antw loggers without to install <em>antw</em> you can try to integrate the loggers manually to your ant build.
Download the <em>antw-common.jar</em> and the <em>antw-logger.jar</em> and add these jar files to the cmd line when execute ant.</p>

<pre><code>ant -lib antw-common-0.5.jar:antw-logger-0.5.jar -logger antw.logger.AntwLogger $@
</code></pre>

<p>You should see the same logging like when you use the antw app itself. But strongly recommended is to install the whole app.</p>

<hr />

<h3 id="loggerandformatter">Logger and Formatter</h3>

<p>The following loggers will attach at runtime to the ant process. We will demonstrate the different loggers with a small ant multiproject build that has two separately modules.</p>

<pre><code>project
    build.xml
    modules
        module_1
            build.xml
        module_2
            build.xml
</code></pre>

<p>This project has a <em>target</em> test that depends on compile, compile-test, jar, unit-jar etc. There are two tests in <em>module_1</em>  they are passed. There are one test in <em>module_2</em> that will fail.</p>

<h5 id="treelogger">TreeLogger</h5>

<p>This is the default logger. All log messages of the build process goes to standard out. The build is logged as a kind of a tree. The following screenshots shows also junit informations. these informations are logged with the antw junit formatter. see <a href="#optional" title="Optional">Optional</a></p>

<p><img id="treelogger" src="tree_logger.png" alt="TreeLogger" title="" /></p>

<h5 id="durationlogger">DurationLogger</h5>

<p>It exists two implementations that log target statistics about your ant build. A DurationLogger is logging a kind of table into a file called <em>target_duration.txt</em>. </p>

<p><img id="durationlogger" src="duration_logger.png" alt="DurationLogger" title="" /></p>

<p>The same informations, but only in a form of a csv file is logged into a file called <em>target_duration.tsv</em>. This file can be easily import into e.g. a excel based application to analyze these information.</p>

<p><img id="durationplainlogger" src="duration_plain_logger.png" alt="DurationPlainLogger" title="" /></p>

<h5 id="targetsummarylogger">TargetSummaryLogger</h5>

<p>This logger will log a summary about your build into a file called <em>target-summary.txt</em>. The table that is logged shows the project, the regarding target that is executed in this project and a duration in seconds and in percent. But you can not sum up all the seconds or the all the percentage of every module to get a 100% coverage. When a target depends on few other targets, then this target has a duration of the sum of all depending targets. Targets that are under 5% of the duration from the build will be excluded.</p>

<p><img id="targetsummarylogger" src="target_summary_logger.png" alt="TargetSummaryLogger" title="" /></p>

<h5 id="junitlogger">JunitLogger</h5>

<p>This logger log all tests (that is shown in the tree view as well) into a file called <em>junit_plain.csv</em>. This is a comma separated value file. Consisting of 6 columns</p>

<pre><code>TestSuite, TestCase, DurationInSec, TestGroup, Status, TestFailureMessage
</code></pre>

<p>The test group are a kind of category based on the duration. It is currently a hardcoded value.</p>

<pre><code>FLASH   &lt;   FAST    &lt;   ONE_MIN     &lt;   THREE_MIN   &lt;   SEVEN_MIN   &lt;   UUH
1 sec   &lt;   10 sec  &lt;   1 min       &lt;   3 min       &lt;   7 min       &lt;   ?
</code></pre>

<p><img id="junitlogger" src="junit_logger.png" alt="JunitLogger" title="" /></p>

<h5 id="messagelogger">MessageLogger</h5>

<p>The MessageLogger will log all messages filtered by the log level to file <em>messages.txt</em></p>

<p><img id="messagelogger" src="message_logger.png" alt="MessageLogger" title="" /></p>

<h5 id="antdefaultlogger">AntDefaultLogger</h5>

<p>The file <em>ant-default.txt</em> contains the messages from the ant default logger.</p>

<p><img id="antdefaultlogger" src="ant_default_logger.png" alt="AntDefaultLogger" title="" /></p>
